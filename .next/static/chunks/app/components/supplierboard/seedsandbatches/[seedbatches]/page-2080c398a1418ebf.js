(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7786],{52197:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(95155),c=s(35695),n=s(94553),l=s(60668),r=s(23464),i=s(12115),d=s(92809),h=s(91867),o=s(76355),x=s(5717),m=s(11846),j=s(68136),u=s(60902),b=s(35935),A=s(16178),p=s(60926),y=s(98999),g=s(78964);function N(){let e=(0,c.useParams)().seedbatches,[t,s]=(0,i.useState)({}),[N,v]=(0,i.useState)([]),[f,w]=(0,i.useState)(!0),[C,S]=(0,i.useState)(!1),[D,_]=(0,i.useState)(!1),[B,k]=(0,i.useState)(null),[E,M]=(0,i.useState)(0),[z,H]=(0,i.useState)({}),[L,O]=(0,i.useState)(""),T=(0,n.b)();(0,i.useEffect)(()=>{(async()=>{w(!0);try{let t=await r.A.get("".concat(l.M,"/supplier_view_single/").concat(e),{headers:{Authorization:"Bearer ".concat(T)}});s(t.data.seed),v(t.data.batches),w(!1)}catch(e){console.log("there was a problem while fetching data. ".concat(e)),w(!1)}})()},[T,e]);let U=e=>e?new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}):"N/A",I=(e,t)=>"batchManufactured"===e||"batchExpireDate"===e?U(t):"object"==typeof t?JSON.stringify(t):t,P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(e),M(t),H(e.batchDetails[t]||{}),S(!0)},F=(e,t)=>{H({...z,[e]:t})},K=e=>{O(e),_(!0)},Z=async()=>{try{console.log(L),await r.A.delete("".concat(l.M,"/delete_batch/").concat(L),{headers:{Authorization:"Bearer ".concat(T)}}),_(!1),window.location.reload()}catch(e){console.log("Delete failed: ".concat(e))}},$=async()=>{try{let e=[...B.batchDetails];e[E]=z;let t=e[E];await r.A.put("".concat(l.M,"/update_batch/").concat(B._id,"/").concat(t._id),{batchDetails:e},{headers:{Authorization:"Bearer ".concat(T)}});let s=N.map(t=>t._id===B._id?{...t,batchDetails:e}:t);v(s),S(!1)}catch(e){console.log("Failed to update batch: ".concat(e))}};return f?(0,a.jsx)(d.A,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.A,{animation:"border",variant:"primary"}),(0,a.jsx)("p",{className:"mt-3",children:"Loading seed details..."})]})}):(0,a.jsxs)(d.A,{className:"py-4",children:[(0,a.jsx)("h1",{className:"mb-4 border-bottom pb-3",children:"Seed Details"}),(0,a.jsxs)(o.A,{className:"shadow-sm mb-4",children:[(0,a.jsxs)(o.A.Header,{as:"h5",className:"bg-primary text-white d-flex justify-content-between align-items-center",children:[(0,a.jsx)("span",{children:t.seedName}),(0,a.jsx)(x.A,{bg:(e=>{switch(null==e?void 0:e.toLowerCase()){case"pending":return"warning";case"approved":return"success";case"rejected":return"danger";default:return"secondary"}})(t.seedStatus),children:t.seedStatus})]}),(0,a.jsxs)(o.A.Body,{children:[(0,a.jsxs)(m.A,{children:[(0,a.jsx)(j.A,{md:6,children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"text-muted mb-1",children:"Manufacturer"}),(0,a.jsx)("p",{className:"fw-bold",children:t.seedManufacturer})]})}),(0,a.jsx)(j.A,{md:6,children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"text-muted mb-1",children:"Type"}),(0,a.jsx)("p",{className:"fw-bold",children:t.seedType})]})})]}),(0,a.jsxs)(m.A,{children:[(0,a.jsx)(j.A,{md:6,children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"text-muted mb-1",children:"Created"}),(0,a.jsx)("p",{children:U(t.createdAt)})]})}),(0,a.jsx)(j.A,{md:6,children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"text-muted mb-1",children:"Last Updated"}),(0,a.jsx)("p",{children:U(t.updatedAt)})]})})]})]})]}),(0,a.jsx)("h2",{className:"mb-3 mt-5",children:"Seed Batches"}),N.length>0?N.map((e,t)=>(0,a.jsxs)(o.A,{className:"shadow-sm mb-4",children:[(0,a.jsxs)(o.A.Header,{as:"h5",className:"bg-light d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("span",{children:["Batch #",t+1,(0,a.jsxs)("div",{className:"text-muted mt-1",style:{fontSize:"0.8rem"},children:["ID: ",e._id]})]}),(0,a.jsx)(u.A,{variant:"outline-primary",size:"sm",onClick:()=>K(e._id),children:"Delete Batch"})]}),(0,a.jsxs)(o.A.Body,{children:[(0,a.jsxs)(m.A,{className:"mb-3",children:[(0,a.jsx)(j.A,{md:6,children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"text-muted mb-1",children:"Created"}),(0,a.jsx)("p",{children:U(e.createdAt)})]})}),(0,a.jsx)(j.A,{md:6,children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"text-muted mb-1",children:"Last Updated"}),(0,a.jsx)("p",{children:U(e.updatedAt)})]})})]}),e.batchDetails&&e.batchDetails.length>0&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)(b.A.Container,{defaultActiveKey:"0",children:[e.batchDetails.length>1&&(0,a.jsx)(A.A,{variant:"tabs",className:"mb-3",children:e.batchDetails.map((e,t)=>(0,a.jsx)(A.A.Item,{children:(0,a.jsxs)(A.A.Link,{eventKey:t.toString(),children:["Detail #",t+1]})},t))}),(0,a.jsx)(b.A.Content,{children:e.batchDetails.map((t,s)=>(0,a.jsxs)(b.A.Pane,{eventKey:s.toString(),children:[(0,a.jsx)("div",{className:"d-flex justify-content-end mb-2",children:(0,a.jsx)(u.A,{variant:"link",size:"sm",onClick:()=>P(e,s),children:"Edit this detail"})}),(0,a.jsxs)(p.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"#"}),(0,a.jsx)("th",{children:"Property"}),(0,a.jsx)("th",{children:"Value"})]})}),(0,a.jsx)("tbody",{children:Object.entries(t).map((e,t)=>{let[s,c]=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:t+1}),(0,a.jsx)("td",{children:s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),(0,a.jsx)("td",{children:I(s,c)})]},t)})})]})]},s))})]})})]})]},e._id)):(0,a.jsx)(o.A,{className:"shadow-sm text-center p-5",children:(0,a.jsx)(o.A.Body,{children:(0,a.jsx)("p",{className:"text-muted mb-0",children:"No batches found for this seed."})})}),(0,a.jsxs)(y.A,{show:C,onHide:()=>S(!1),size:"lg",children:[(0,a.jsx)(y.A.Header,{closeButton:!0,children:(0,a.jsxs)(y.A.Title,{children:["Edit Batch Detail #",E+1]})}),(0,a.jsx)(y.A.Body,{children:B&&(0,a.jsx)(g.A,{children:Object.entries(z).map(e=>{let[t,s]=e;return(0,a.jsxs)(g.A.Group,{className:"mb-3",children:[(0,a.jsx)(g.A.Label,{children:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),"batchManufactured"===t||"batchExpireDate"===t?(0,a.jsx)(g.A.Control,{type:"date",value:s?new Date(s).toISOString().split("T")[0]:"",onChange:e=>F(t,e.target.value)}):(0,a.jsx)(g.A.Control,{type:"text",value:s||"",onChange:e=>F(t,e.target.value)})]},t)})})}),(0,a.jsxs)(y.A.Footer,{children:[(0,a.jsx)(u.A,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),(0,a.jsx)(u.A,{variant:"primary",onClick:$,children:"Save Changes"})]})]}),(0,a.jsxs)(y.A,{show:D,onHide:()=>_(!1),children:[(0,a.jsx)(y.A.Header,{closeButton:!0,children:(0,a.jsx)(y.A.Title,{children:"Confirm Delete"})}),(0,a.jsx)(y.A.Body,{children:"Are you sure you want to delete this batch?"}),(0,a.jsxs)(y.A.Footer,{children:[(0,a.jsx)(u.A,{variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),(0,a.jsx)(u.A,{variant:"danger",onClick:Z,children:"Delete"})]})]})]})}},60668:(e,t,s)=>{"use strict";s.d(t,{M:()=>a});let a="http://localhost:5200"},65434:(e,t,s)=>{Promise.resolve().then(s.bind(s,52197))},94553:(e,t,s)=>{"use strict";s.d(t,{b:()=>a});let a=()=>localStorage.getItem("usertoken")}},e=>{var t=t=>e(e.s=t);e.O(0,[3464,2573,1450,5634,7628,8238,8441,1684,7358],()=>t(65434)),_N_E=e.O()}]);