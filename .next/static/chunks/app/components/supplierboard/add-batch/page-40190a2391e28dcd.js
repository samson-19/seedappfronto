(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3081],{50628:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(95155),r=a(12115),n=a(91867),c=a(60926),d=a(60902),l=a(98999),i=a(78964),o=a(94553),h=a(60668),u=a(23464),x=a(6874),j=a.n(x);function p(){let[e,s]=(0,r.useState)([]),[a,x]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[A,y]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[b,N]=(0,r.useState)({seedName:"",seedManufacturer:"",seedType:""}),[g,S]=(0,r.useState)(!1),C=(0,o.b)();(0,r.useEffect)(()=>{(async()=>{x(!0);try{let e=await u.A.get("".concat(h.M,"/supplier_view_products"),{headers:{Authorization:"Bearer ".concat(C)}});s(e.data.mySeeds),x(!1)}catch(e){console.log("There was a problem: Error ".concat(e)),x(!1)}})()},[C]);let _=async()=>{try{await u.A.delete("".concat(h.M,"/supplier_erase_seed_and_batch/").concat(f._id),{headers:{Authorization:"Bearer ".concat(C)}}),s(e.filter(e=>e.id!==f.id)),m(!1)}catch(e){console.log("Delete failed: ".concat(e))}},w=async()=>{S(!0);try{await u.A.put("".concat(h.M,"/update_seed_data/").concat(f._id),b,{headers:{Authorization:"Bearer ".concat(C)}}),s(e.map(e=>e.id===f.id?{...e,...b}:e)),y(!1)}catch(e){console.log("Update failed: ".concat(e))}finally{S(!1)}},M=e=>{v(e),m(!0)},T=e=>{v(e),N({seedName:e.seedName,seedManufacturer:e.seedManufacturer,seedType:e.seedType}),y(!0)};return(0,t.jsxs)("div",{className:"container mt-4",children:[(0,t.jsx)("h2",{children:"My Seeds"}),(0,t.jsx)("p",{children:"Select Seed To Add New Batch"}),a?(0,t.jsx)("div",{className:"text-center my-5",children:(0,t.jsx)(n.A,{animation:"border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,t.jsxs)(c.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"#"}),(0,t.jsx)("th",{children:"Seed Name"}),(0,t.jsx)("th",{children:"Manufacturer"}),(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.length>0?e.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:s+1}),(0,t.jsxs)("td",{children:[" ",(0,t.jsx)(j(),{href:"/components/supplierboard/add-batch/".concat(e._id),children:e.seedName})," "]}),(0,t.jsx)("td",{children:e.seedManufacturer}),(0,t.jsx)("td",{children:e.seedType}),(0,t.jsxs)("td",{children:[(0,t.jsx)(d.A,{variant:"warning",size:"sm",className:"me-2",onClick:()=>T(e),children:"Edit"}),(0,t.jsx)(d.A,{variant:"danger",size:"sm",onClick:()=>M(e),children:"Delete"})]})]},e._id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-center",children:"No seeds found"})})})]}),(0,t.jsxs)(l.A,{show:p,onHide:()=>m(!1),children:[(0,t.jsx)(l.A.Header,{closeButton:!0,children:(0,t.jsx)(l.A.Title,{children:"Confirm Delete"})}),(0,t.jsxs)(l.A.Body,{children:["Are you sure you want to delete ",null==f?void 0:f.seedName,"?"]}),(0,t.jsxs)(l.A.Footer,{children:[(0,t.jsx)(d.A,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),(0,t.jsx)(d.A,{variant:"danger",onClick:_,children:"Delete"})]})]}),(0,t.jsxs)(l.A,{show:A,onHide:()=>y(!1),children:[(0,t.jsx)(l.A.Header,{closeButton:!0,children:(0,t.jsx)(l.A.Title,{children:"Edit Seed"})}),(0,t.jsx)(l.A.Body,{children:(0,t.jsxs)(i.A,{children:[(0,t.jsxs)(i.A.Group,{className:"mb-3",children:[(0,t.jsx)(i.A.Label,{children:"Seed Name"}),(0,t.jsx)(i.A.Control,{type:"text",value:b.seedName,onChange:e=>N({...b,seedName:e.target.value})})]}),(0,t.jsxs)(i.A.Group,{className:"mb-3",children:[(0,t.jsx)(i.A.Label,{children:"Seed Manufacturer"}),(0,t.jsx)(i.A.Control,{type:"text",value:b.seedManufacturer,onChange:e=>N({...b,seedManufacturer:e.target.value})})]}),(0,t.jsxs)(i.A.Group,{className:"mb-3",children:[(0,t.jsx)(i.A.Label,{children:"Seed Type"}),(0,t.jsx)(i.A.Control,{type:"text",value:b.seedType,onChange:e=>N({...b,seedType:e.target.value})})]})]})}),(0,t.jsxs)(l.A.Footer,{children:[(0,t.jsx)(d.A,{variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),(0,t.jsx)(d.A,{variant:"primary",onClick:w,disabled:g,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),(0,t.jsx)("span",{className:"ms-2",children:"Updating data..."})]}):"Submit Changes"})]})]})]})}},60668:(e,s,a)=>{"use strict";a.d(s,{M:()=>t});let t="http://localhost:5200"},60926:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var t=a(29300),r=a.n(t),n=a(12115),c=a(97390),d=a(95155);let l=n.forwardRef((e,s)=>{let{bsPrefix:a,className:t,striped:n,bordered:l,borderless:i,hover:o,size:h,variant:u,responsive:x,...j}=e,p=(0,c.oU)(a,"table"),m=r()(t,p,u&&"".concat(p,"-").concat(u),h&&"".concat(p,"-").concat(h),n&&"".concat(p,"-").concat("string"==typeof n?"striped-".concat(n):"striped"),l&&"".concat(p,"-bordered"),i&&"".concat(p,"-borderless"),o&&"".concat(p,"-hover")),A=(0,d.jsx)("table",{...j,className:m,ref:s});if(x){let e="".concat(p,"-responsive");return"string"==typeof x&&(e="".concat(e,"-").concat(x)),(0,d.jsx)("div",{className:e,children:A})}return A})},64056:(e,s,a)=>{Promise.resolve().then(a.bind(a,50628))},94553:(e,s,a)=>{"use strict";a.d(s,{b:()=>t});let t=()=>localStorage.getItem("usertoken")}},e=>{var s=s=>e(e.s=s);e.O(0,[3464,6874,2573,1450,7628,8441,1684,7358],()=>s(64056)),_N_E=e.O()}]);