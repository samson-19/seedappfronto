(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3880],{5717:(e,a,s)=>{"use strict";s.d(a,{A:()=>i});var t=s(29300),r=s.n(t),d=s(12115),n=s(97390),l=s(95155);let c=d.forwardRef((e,a)=>{let{bsPrefix:s,bg:t="primary",pill:d=!1,text:c,className:i,as:o="span",...h}=e,u=(0,n.oU)(s,"badge");return(0,l.jsx)(o,{ref:a,...h,className:r()(i,u,d&&"rounded-pill",c&&"text-".concat(c),t&&"bg-".concat(t))})});c.displayName="Badge";let i=c},11846:(e,a,s)=>{"use strict";s.d(a,{A:()=>i});var t=s(29300),r=s.n(t),d=s(12115),n=s(97390),l=s(95155);let c=d.forwardRef((e,a)=>{let{bsPrefix:s,className:t,as:d="div",...c}=e,i=(0,n.oU)(s,"row"),o=(0,n.gy)(),h=(0,n.Jm)(),u="".concat(i,"-cols"),x=[];return o.forEach(e=>{let a;let s=c[e];delete c[e],null!=s&&"object"==typeof s?{cols:a}=s:a=s,null!=a&&x.push("".concat(u).concat(e!==h?"-".concat(e):"","-").concat(a))}),(0,l.jsx)(d,{ref:a,...c,className:r()(t,i,...x)})});c.displayName="Row";let i=c},15999:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var t=s(95155),r=s(94553),d=s(60668),n=s(23464),l=s(12115),c=s(5717),i=s(92809),o=s(91867),h=s(32214),u=s(60902),x=s(11846),m=s(68136),j=s(76355),p=s(98999),A=s(78964),f=s(35695);function v(){let{inspectseed:e}=(0,f.useParams)(),a=(0,f.useRouter)(),[s,v]=(0,l.useState)(null),[y,g]=(0,l.useState)(!0),[b,N]=(0,l.useState)({text:"",type:""}),S=(0,r.b)(),[w,C]=(0,l.useState)(!1),[k,_]=(0,l.useState)(""),[B,U]=(0,l.useState)(null),[R,D]=(0,l.useState)(""),[E,H]=(0,l.useState)(!1),[M,L]=(0,l.useState)(""),[T,z]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{g(!0);let a=await n.A.get("".concat(d.M,"/seed_batch_single_inspector/").concat(e),{headers:{Authorization:"Bearer ".concat(S)}});v(a.data.seedWithBatches),g(!1)}catch(e){var a,s;console.error("Error fetching seed data:",e),N({text:(null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.msg)||"Failed to load seed data",type:"danger"}),g(!1)}})()},[e,S]);let I=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=e=>{let a,{status:s}=e;switch(s.toLowerCase()){case"approved":a="success";break;case"quarantine":a="danger";break;case"pending":a="warning";case"expired":a="primary";break;default:a="secondary"}return(0,t.jsx)(c.A,{bg:a,children:s})},O=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_(e),U(a),D(a.seedStatus||a.batchStatus),z(s),C(!0)},P=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;L(e),U(a),z(s),H(!0)},q=async()=>{try{let e,a;"seed"===k?(e="".concat(d.M,"/update_seed_status/").concat(B._id),a={seedStatus:R}):(e="".concat(d.M,"/update_batch_status/").concat(T),a={batchDetailId:B._id,batchStatus:R}),await n.A.put(e,a,{headers:{Authorization:"Bearer ".concat(S)}}),C(!1),N({text:"".concat(k," status updated successfully"),type:"success"}),fetchSeedData()}catch(s){var e,a;console.error("Error updating ".concat(k," status:"),s),N({text:(null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.msg)||"Failed to update ".concat(k," status"),type:"danger"})}},G=async()=>{try{let e;"seed"===M?(e="".concat(d.M,"/delete_seed/").concat(B._id),await n.A.delete(e,{headers:{Authorization:"Bearer ".concat(S)}}),H(!1),N({text:"Seed deleted successfully",type:"success"}),a.push("/inspector/seeds")):(e="".concat(d.M,"/delete_batch_detail/").concat(T),await n.A.delete(e,{headers:{Authorization:"Bearer ".concat(S)},data:{batchDetailId:B._id}}),H(!1),N({text:"Batch deleted successfully",type:"success"}),fetchSeedData())}catch(a){var e,s;console.error("Error deleting ".concat(M,":"),a),N({text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.msg)||"Failed to delete ".concat(M),type:"danger"}),H(!1)}};return y?(0,t.jsx)(i.A,{className:"py-5 text-center",children:(0,t.jsx)(o.A,{animation:"border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):s?(0,t.jsxs)(i.A,{className:"py-4",children:[(0,t.jsxs)(x.A,{className:"mb-4 align-items-center",children:[(0,t.jsx)(m.A,{children:(0,t.jsx)("h2",{children:"Seed Inspector:"})}),(0,t.jsx)(m.A,{xs:"auto",children:(0,t.jsx)(u.A,{variant:"outline-primary",onClick:()=>a.push("/components/inspectorboard"),className:"me-2",children:"Back to Seeds"})})]}),b.text&&(0,t.jsx)(h.A,{variant:b.type,onClose:()=>N({text:"",type:""}),dismissible:!0,children:b.text}),(0,t.jsxs)(j.A,{className:"mb-4",children:[(0,t.jsx)(j.A.Header,{children:(0,t.jsxs)(x.A,{className:"align-items-center",children:[(0,t.jsx)(m.A,{children:(0,t.jsx)("h5",{className:"mb-0",children:"Seed Details"})}),(0,t.jsxs)(m.A,{xs:"auto",children:[(0,t.jsx)(u.A,{variant:"warning",size:"sm",className:"me-2",onClick:()=>O("seed",s.seed),children:"Update Status"}),(0,t.jsx)(u.A,{variant:"danger",size:"sm",onClick:()=>P("seed",s.seed),children:"Delete Seed"})]})]})}),(0,t.jsxs)(j.A.Body,{children:[(0,t.jsxs)(x.A,{children:[(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Seed Name:"})," ",s.seed.seedName]}),(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Manufacturer:"})," ",s.seed.seedManufacturer]}),(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Type:"})," ",s.seed.seedType]})]}),(0,t.jsxs)(x.A,{className:"mt-3",children:[(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Status:"})," ",(0,t.jsx)(F,{status:s.seed.seedStatus})]}),(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Created:"})," ",I(s.seed.createdAt)]}),(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Last Updated:"})," ",I(s.seed.updatedAt)]})]})]})]}),(0,t.jsxs)("h4",{className:"mt-4 mb-3",children:["Batches (",s.batches.length>0?s.batches.reduce((e,a)=>e+a.batchDetails.length,0):0,")"]}),s.batches.length>0?s.batches.map(e=>(0,t.jsx)("div",{children:e.batchDetails.map(a=>(0,t.jsxs)(j.A,{className:"mb-3",children:[(0,t.jsx)(j.A.Header,{children:(0,t.jsxs)(x.A,{className:"align-items-center",children:[(0,t.jsx)(m.A,{children:(0,t.jsxs)("h6",{className:"mb-0",children:["Batch: ",a.batchName]})}),(0,t.jsxs)(m.A,{xs:"auto",children:[(0,t.jsx)(u.A,{variant:"warning",size:"sm",className:"me-2",onClick:()=>O("batch",a,e._id),children:"Update Status"}),(0,t.jsx)(u.A,{variant:"danger",size:"sm",onClick:()=>P("batch",a,e._id),children:"Delete Batch"})]})]})}),(0,t.jsxs)(j.A.Body,{children:[(0,t.jsxs)(x.A,{children:[(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Made At:"})," ",a.batchMadeAt]}),(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Manufactured:"})," ",I(a.batchManufactured)]}),(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Expires:"})," ",I(a.batchExpireDate)]})]}),(0,t.jsxs)(x.A,{className:"mt-3",children:[(0,t.jsxs)(m.A,{md:4,children:[(0,t.jsx)("strong",{children:"Status:"})," ",(0,t.jsx)(F,{status:a.batchStatus})]}),(0,t.jsx)(m.A,{md:4,children:new Date(a.batchExpireDate)<new Date&&(0,t.jsx)(c.A,{bg:"danger",children:"Expired"})})]})]})]},a._id))},e._id)):(0,t.jsx)(h.A,{variant:"info",children:"No batches available for this seed."}),(0,t.jsxs)(p.A,{show:w,onHide:()=>C(!1),children:[(0,t.jsx)(p.A.Header,{closeButton:!0,children:(0,t.jsxs)(p.A.Title,{children:["Update ","seed"===k?"Seed":"Batch"," Status"]})}),(0,t.jsx)(p.A.Body,{children:(0,t.jsxs)(A.A.Group,{children:[(0,t.jsx)(A.A.Label,{children:"Status"}),(0,t.jsxs)(A.A.Select,{value:R,onChange:e=>D(e.target.value),children:[(0,t.jsx)("option",{value:"pending",children:"pending"}),(0,t.jsx)("option",{value:"approved",children:"approved"}),(0,t.jsx)("option",{value:"quarantine",children:"quarantine"}),(0,t.jsx)("option",{value:"expired",children:"expired"})]})]})}),(0,t.jsxs)(p.A.Footer,{children:[(0,t.jsx)(u.A,{variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),(0,t.jsx)(u.A,{variant:"primary",onClick:q,children:"Update Status"})]})]}),(0,t.jsxs)(p.A,{show:E,onHide:()=>H(!1),children:[(0,t.jsx)(p.A.Header,{closeButton:!0,children:(0,t.jsx)(p.A.Title,{children:"Confirm Delete"})}),(0,t.jsxs)(p.A.Body,{children:["Are you sure you want to delete this ",M,"?","seed"===M&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(h.A,{variant:"warning",children:"This will also delete all associated batches!"})})]}),(0,t.jsxs)(p.A.Footer,{children:[(0,t.jsx)(u.A,{variant:"secondary",onClick:()=>H(!1),children:"Cancel"}),(0,t.jsx)(u.A,{variant:"danger",onClick:G,children:"Delete"})]})]})]}):(0,t.jsxs)(i.A,{className:"py-5",children:[(0,t.jsx)(h.A,{variant:"danger",children:"Seed not found or you do not have permission to view it."}),(0,t.jsx)(u.A,{variant:"primary",onClick:()=>a.push("/components/inspectorboard"),children:"Back to Seeds List"})]})}},18452:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let t=s(12115).createContext(null);t.displayName="CardHeaderContext";let r=t},21861:(e,a,s)=>{Promise.resolve().then(s.bind(s,15999))},32214:(e,a,s)=>{"use strict";s.d(a,{A:()=>f});var t=s(29300),r=s.n(t),d=s(12115),n=s(80612),l=s(37150),c=s(97390),i=s(58724),o=s(95155);let h=(0,i.A)("h4");h.displayName="DivStyledAsH4";let u=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d=h,...n}=e;return t=(0,c.oU)(t,"alert-heading"),(0,o.jsx)(d,{ref:a,className:r()(s,t),...n})});u.displayName="AlertHeading";var x=s(29591);let m=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d=x.A,...n}=e;return t=(0,c.oU)(t,"alert-link"),(0,o.jsx)(d,{ref:a,className:r()(s,t),...n})});m.displayName="AlertLink";var j=s(88839),p=s(77706);let A=d.forwardRef((e,a)=>{let{bsPrefix:s,show:t=!0,closeLabel:d="Close alert",closeVariant:i,className:h,children:u,variant:x="primary",onClose:m,dismissible:A,transition:f=j.A,...v}=(0,n.Zw)(e,{show:"onClose"}),y=(0,c.oU)(s,"alert"),g=(0,l.A)(e=>{m&&m(!1,e)}),b=!0===f?j.A:f,N=(0,o.jsxs)("div",{role:"alert",...b?void 0:v,ref:a,className:r()(h,y,x&&"".concat(y,"-").concat(x),A&&"".concat(y,"-dismissible")),children:[A&&(0,o.jsx)(p.A,{onClick:g,"aria-label":d,variant:i}),u]});return b?(0,o.jsx)(b,{unmountOnExit:!0,...v,ref:void 0,in:t,children:N}):t?N:null});A.displayName="Alert";let f=Object.assign(A,{Link:m,Heading:u})},35695:(e,a,s)=>{"use strict";var t=s(18999);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},60668:(e,a,s)=>{"use strict";s.d(a,{M:()=>t});let t="https://seedverify-3.onrender.com"},76355:(e,a,s)=>{"use strict";s.d(a,{A:()=>b});var t=s(29300),r=s.n(t),d=s(12115),n=s(97390),l=s(95155);let c=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d="div",...c}=e;return t=(0,n.oU)(t,"card-body"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});c.displayName="CardBody";let i=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d="div",...c}=e;return t=(0,n.oU)(t,"card-footer"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});i.displayName="CardFooter";var o=s(18452);let h=d.forwardRef((e,a)=>{let{bsPrefix:s,className:t,as:c="div",...i}=e,h=(0,n.oU)(s,"card-header"),u=(0,d.useMemo)(()=>({cardHeaderBsPrefix:h}),[h]);return(0,l.jsx)(o.A.Provider,{value:u,children:(0,l.jsx)(c,{ref:a,...i,className:r()(t,h)})})});h.displayName="CardHeader";let u=d.forwardRef((e,a)=>{let{bsPrefix:s,className:t,variant:d,as:c="img",...i}=e,o=(0,n.oU)(s,"card-img");return(0,l.jsx)(c,{ref:a,className:r()(d?"".concat(o,"-").concat(d):o,t),...i})});u.displayName="CardImg";let x=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d="div",...c}=e;return t=(0,n.oU)(t,"card-img-overlay"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});x.displayName="CardImgOverlay";let m=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d="a",...c}=e;return t=(0,n.oU)(t,"card-link"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});m.displayName="CardLink";var j=s(58724);let p=(0,j.A)("h6"),A=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d=p,...c}=e;return t=(0,n.oU)(t,"card-subtitle"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});A.displayName="CardSubtitle";let f=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d="p",...c}=e;return t=(0,n.oU)(t,"card-text"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});f.displayName="CardText";let v=(0,j.A)("h5"),y=d.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:d=v,...c}=e;return t=(0,n.oU)(t,"card-title"),(0,l.jsx)(d,{ref:a,className:r()(s,t),...c})});y.displayName="CardTitle";let g=d.forwardRef((e,a)=>{let{bsPrefix:s,className:t,bg:d,text:i,border:o,body:h=!1,children:u,as:x="div",...m}=e,j=(0,n.oU)(s,"card");return(0,l.jsx)(x,{ref:a,...m,className:r()(t,j,d&&"bg-".concat(d),i&&"text-".concat(i),o&&"border-".concat(o)),children:h?(0,l.jsx)(c,{children:u}):u})});g.displayName="Card";let b=Object.assign(g,{Img:u,Title:y,Subtitle:A,Body:c,Link:m,Text:f,Header:h,Footer:i,ImgOverlay:x})},94553:(e,a,s)=>{"use strict";s.d(a,{b:()=>t});let t=()=>localStorage.getItem("usertoken")}},e=>{var a=a=>e(e.s=a);e.O(0,[3464,2573,1450,5634,7628,8441,1684,7358],()=>a(21861)),_N_E=e.O()}]);