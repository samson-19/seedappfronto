(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4592],{58198:(e,s,a)=>{Promise.resolve().then(a.bind(a,98017))},60668:(e,s,a)=>{"use strict";a.d(s,{M:()=>t});let t="https://seedverify-3.onrender.com"},94553:(e,s,a)=>{"use strict";a.d(s,{b:()=>t});let t=()=>localStorage.getItem("usertoken")},98017:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(95155),c=a(94553),l=a(60668),d=a(23464),n=a(12115);function r(){let[e,s]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0),[i,h]=(0,n.useState)(null),[o,u]=(0,n.useState)("all"),[m,x]=(0,n.useState)({}),b=(0,c.b)();(0,n.useEffect)(()=>{(async()=>{try{r(!0),h(null);let e="".concat(l.M,"/seeds-with-batches");"all"!==o&&(e="".concat(l.M,"/seeds/type/").concat(o));let a=await d.A.get(e,{headers:{Authorization:"Bearer ".concat(b)}});s(a.data.seedsWithBatches),r(!1)}catch(e){console.error("Error fetching seeds with batches:",e),h("Failed to load seeds and batches. Please try again later."),r(!1)}})()},[o]);let j=async()=>{try{r(!0),h(null);let e="".concat(l.M,"/seeds-with-batches");"all"!==o&&(e="".concat(l.M,"/seeds/type/").concat(o));let a=await d.A.get(e,{headers:{Authorization:"Bearer ".concat(b)}});s(a.data.seedsWithBatches),r(!1)}catch(e){console.error("Error fetching seeds with batches:",e),h("Failed to load seeds and batches. Please try again later."),r(!1)}},p=e=>{x(s=>({...s,[e]:!s[e]}))},N=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),g=e=>{switch(e){case"approved":return"bg-success";case"pending":return"bg-warning text-dark";case"quarantine":return"bg-danger";case"expired":return"bg-secondary";default:return"bg-info"}};return(0,t.jsxs)("div",{className:"container mt-4",children:[(0,t.jsx)("h2",{className:"mb-4",children:"Seeds and Batches"}),(0,t.jsxs)("div",{className:"row mb-4",children:[(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"seedTypeFilter",children:"Filter by Seed Type:"}),(0,t.jsxs)("select",{id:"seedTypeFilter",className:"form-select",value:o,onChange:e=>u(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Types"}),(0,t.jsx)("option",{value:"vegetable",children:"Vegetable"}),(0,t.jsx)("option",{value:"rice",children:"Rice"}),(0,t.jsx)("option",{value:"maize",children:"Maize"})]})]})}),(0,t.jsx)("div",{className:"col-md-8 d-flex align-items-end justify-content-end",children:(0,t.jsx)("button",{className:"btn btn-primary",onClick:j,disabled:a,children:a?"Loading...":"Refresh"})})]}),i&&(0,t.jsx)("div",{className:"alert alert-danger",children:i}),a?(0,t.jsx)("div",{className:"d-flex justify-content-center my-5",children:(0,t.jsx)("div",{className:"spinner-border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===e.length?(0,t.jsx)("div",{className:"alert alert-info",children:"No seeds found for the selected filter."}):(0,t.jsx)("div",{className:"row",children:e.map(e=>{var s,a;return(0,t.jsx)("div",{className:"col-12 mb-4",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h5",{className:"mb-0",children:[(0,t.jsx)("span",{className:"fw-bold",children:e.seedName}),(0,t.jsx)("span",{className:"badge ms-2 ".concat(g(e.seedStatus)),children:e.seedStatus})]}),(0,t.jsxs)("small",{className:"text-muted",children:["Type: ",(0,t.jsx)("span",{className:"badge bg-info",children:e.seedType})," • Manufacturer: ",e.seedManufacturer," • Added: ",N(e.createdAt)]})]}),(0,t.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>p(e._id),children:m[e._id]?"Hide Batches":"Show Batches"})]}),m[e._id]&&(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("h6",{className:"card-subtitle mb-3",children:["Batches (",(null===(s=e.batches)||void 0===s?void 0:s.length)||0,")"]}),(null===(a=e.batches)||void 0===a?void 0:a.length)>0?(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Batch Name"}),(0,t.jsx)("th",{children:"Manufactured"}),(0,t.jsx)("th",{children:"Made At"}),(0,t.jsx)("th",{children:"Expires On"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:e.batches.flatMap(e=>e.batchDetails.map((s,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:s.batchName}),(0,t.jsx)("td",{children:N(s.batchManufactured)}),(0,t.jsx)("td",{children:s.batchMadeAt}),(0,t.jsxs)("td",{children:[N(s.batchExpireDate),new Date(s.batchExpireDate)<new Date&&(0,t.jsx)("span",{className:"badge bg-danger ms-2",children:"Expired"})]}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat(g(s.batchStatus)),children:s.batchStatus})})]},"".concat(e._id,"-").concat(a))))})]})}):(0,t.jsx)("p",{className:"card-text text-muted",children:"No batches found for this seed."})]})]})},e._id)})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3464,8441,1684,7358],()=>s(58198)),_N_E=e.O()}]);