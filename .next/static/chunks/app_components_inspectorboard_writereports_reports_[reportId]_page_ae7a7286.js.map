{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/MR.PC/OneDrive/Desktop/SAVs/seed-app/front/app/components/inspectorboard/writereports/reports/%5BreportId%5D/page.js"],"sourcesContent":["'use client'\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Button, Spinner } from 'react-bootstrap';\r\nimport { Calendar, Tag, ArrowLeft, Printer } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport axios from 'axios';\r\nimport { ApiUrl } from '@/helpers/ApiUrl';\r\nimport { getSupertoken } from '@/helpers/AccessToken';\r\nimport jsPDF from 'jspdf';\r\nimport { useParams } from 'next/navigation';\r\n\r\nconst SingleReport = () => {\r\n    const params = useParams()\r\n    const reportId = params.reportId \r\n  const [report, setReport] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const usertoken = getSupertoken();\r\n\r\n  useEffect(() => {\r\n    const fetchReport = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get(`${ApiUrl}/report_view_own_report/${reportId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${usertoken}`\r\n          }\r\n        });\r\n        \r\n        setReport(response.data.myReport);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(`There was a problem fetching the report. Error: ${error}`);\r\n        setError('Failed to load report. Please try again later.');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (reportId) {\r\n      fetchReport();\r\n    }\r\n  }, [reportId, usertoken]);\r\n\r\n  const generatePDF = () => {\r\n    if (!report) return;\r\n\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.getWidth();\r\n    const margin = 20;\r\n    const lineHeight = 7;\r\n    let yPosition = 20;\r\n    \r\n    // Add title\r\n    doc.setFontSize(18);\r\n    doc.text(report.reportTitle, pageWidth / 2, yPosition, { align: 'center' });\r\n    yPosition += lineHeight * 2;\r\n    \r\n    // Add metadata\r\n    doc.setFontSize(11);\r\n    doc.text(`Type: ${report.reportType}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    \r\n    doc.text(`Date: ${new Date(report.reportDate).toLocaleDateString()}`, margin, yPosition);\r\n    yPosition += lineHeight * 2;\r\n    \r\n    // Add content\r\n    doc.setFontSize(12);\r\n    const contentWidth = pageWidth - (margin * 2);\r\n    const splitContent = doc.splitTextToSize(report.reportBody, contentWidth);\r\n    doc.text(splitContent, margin, yPosition);\r\n    \r\n    // Save the PDF\r\n    doc.save(`${report.reportTitle.replace(/\\s+/g, '_')}_report.pdf`);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '300px' }}>\r\n        <Spinner animation=\"border\" role=\"status\">\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </Spinner>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container className=\"py-5\">\r\n        <Card className=\"text-center p-5\">\r\n          <Card.Body>\r\n            <h3>Error</h3>\r\n            <p className=\"text-danger\">{error}</p>\r\n            <Link href=\"/components/inspectorboard/writereports/reports/\" className=\"btn btn-primary\">Go Back to Reports</Link>\r\n          </Card.Body>\r\n        </Card>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!report) {\r\n    return (\r\n      <Container className=\"py-5\">\r\n        <Card className=\"text-center p-5\">\r\n          <Card.Body>\r\n            <h3>Report Not Found</h3>\r\n            <p className=\"text-muted\">The requested report could not be found.</p>\r\n            <Link href=\"/components/inspectorboard/writereports/reports/\" className=\"btn btn-primary\">\r\n              Back to Reports\r\n            </Link>\r\n          </Card.Body>\r\n        </Card>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      <div className=\"mb-4\">\r\n        <Link href=\"/components/inspectorboard/writereports/reports/\" className=\"btn btn-outline-secondary d-inline-flex align-items-center\">\r\n          <ArrowLeft size={16} className=\"me-2\" />\r\n          Back to Reports\r\n        </Link>\r\n      </div>\r\n      \r\n      <Card className=\"shadow-sm\">\r\n        <Card.Header className=\"bg-white py-3\">\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <h2 className=\"mb-0\">{report.reportTitle}</h2>\r\n            <Button \r\n              variant=\"outline-primary\" \r\n              className=\"d-flex align-items-center\"\r\n              onClick={generatePDF}\r\n            >\r\n              <Printer size={16} className=\"me-2\" />\r\n              Print PDF\r\n            </Button>\r\n          </div>\r\n        </Card.Header>\r\n        \r\n        <Card.Body>\r\n          <Row className=\"mb-4\">\r\n            <Col md={6} className=\"mb-3 mb-md-0\">\r\n              <div className=\"d-flex align-items-center\">\r\n                <Tag size={18} className=\"text-primary me-2\" />\r\n                <div>\r\n                  <div className=\"text-muted small\">Report Type</div>\r\n                  <div className=\"fw-bold\">{report.reportType}</div>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n            \r\n            <Col md={6}>\r\n              <div className=\"d-flex align-items-center\">\r\n                <Calendar size={18} className=\"text-primary me-2\" />\r\n                <div>\r\n                  <div className=\"text-muted small\">Report Date</div>\r\n                  <div className=\"fw-bold\">{new Date(report.reportDate).toLocaleDateString()}</div>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n          \r\n          <hr className=\"my-4\" />\r\n          \r\n          <div className=\"report-content\">\r\n            <div className=\"bg-light p-4 rounded\">\r\n              {report.reportBody.split('\\n').map((paragraph, i) => (\r\n                <p key={i}>{paragraph}</p>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SingleReport;"],"names":[],"mappings":"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","debugId":null}}]
}